Базовое администрирование пользователей в Linux

Администрирование пользователей:
- Идентификатор пользователя: UID (User ID)
- Идентификатор группы: GID (Group ID)
- Идентификатор пользователя root UID=0

В Линукс есть несколько файлов, которые отвечают за созданных пользователей в системе:
/etc/passwd		-информация о пользователях
/etc/group		-информация о группах
/etc/shadow		-файл с паролями пользователей
/etc/gshadow		-файл с паролями групп
/etc/login.defs		-содержит настройки для создания новых пользователей
/etc/skel			-папка, в которой содержатся файлы, которые будут копироваться в домашний каталог нового пользователя

создание пользователя
sudo useradd user_1 (или useradd user_1 для суперпользователя)
	-создает пользователя БЕЗ пароля, папок и т.д.

sudo adduser user_2 (или adduser user_2 для суперпользователя)
	-создается пользователь со всеми необходимыми папками
su - user_2 -войти под пользователем user_2
sudo userdel user_1 -удаление пользователя user_1
remove-home -Для удаления домашнего каталога может использоваться дополнительный параметр
remove-all-files -для поиска и удаления всех файлов системы, принадлежащих удаляемому пользователю используется параметр

=========ПАМЯТКА ДЛЯ РАБОТЫ С ПОЛЬЗОВАТЕЛЯМИ=========
Управление пользователями и группами:
	useradd		-добавляет нового пользователя;
	passwd		-устанавливает пароль пользователя;
	usermod		-изменяет параметры учетной записи пользователя;
	usermod		-используется для настройки параметров пользователя
	usermod -L user_name		-на время отсутствия пользователя можно заблокировать его запись с помощью команды
	usermod -U user_name		-для разблокировки записи необходимо выполнить команду
	usermod -l new_user_name old_user_name		-одним из вариантов лишения пользователя возможности входа в систему может быть смена имени пользователя. При этом вход под старым именем становится невозможным. Для этого необходимо выполнить команду
	userdel		-удаляет учетную запись пользователя.
	userdel -r student		-Если же необходимо удалить и домашнюю директорию, то следует использовать ключ -r

Команды управления группами:
	groupadd (addgroup) 	-создает новую группу;
	gpasswd 				-устанавливает пароль группы;
	groupmod 				-изменяет параметры группы;
	groupdel (delgroup) 	-удаляет группу.

Дополнительная информация располагается в файлах:
	/etc/default/useradd 	—свойства по умолчанию для новых пользователей;
	/etc/login.defs 		—настройки новых пользователей;
	/etc/skel 				—каталог, файлы из которого копируются в домашний каталог нового пользователя.

идентификатор пользователя (UID);
идентификатор группы (GID);
пароль (password);
срок действия пароля (expiry date);
домашний каталог (home directory);

==========Памятка по правам доступа==========

rwx представление
--- 	000		0 	Все запрещено
--x 	001 	1	Только исполнение
-w- 	010 	2	Только запись
-wx 	011 	3	Только запись и исполнение
r-- 	100 	4	Только чтение
r-x 	101 	5	Чтение и исполнение
rw- 	110 	6	Чтение и запись
rwx 	111 	7	Все разрешено

RWX-представление назначается для трех категорий пользователей т.е. представляет собой три тройки прав:
1. Первая тройка определяет права владельца файла. 			-U
2. Вторая тройка определяет права группы владельца файла. 	-G
3. Третья тройка для всех остальных пользователей.			-O

Примеры:
rw-rw-rw- (все могут читать и изменять)
rwx------ (полный доступ имеет владелец файла)
rw-r--r-- (все могут читать, владелец также изменять)
rwxr-xr-x (все могут читать и исполнять, владелец также изменять)

ugo=a -можно использовать а вместо ugo. а образовано от all

chmod ugo+x script1 -дать возможность всем трем уровням выполнять script1
chmod ugo-x script1 -отнять возможность у всех трех уровней выполнять script1
chmod a+rwx script1 -дать абсолютно все права всем уровням script1
chmod 777 script1 -изменение параметров с помощью дестичной формы, означачет дать абсолютно все права всем уровням script1

chown	-изменение владельца или группы файла

sudo chown user:group script1 -форма записи

sudo chown root script1						-смена владельца файла на root
sudo chown :group user_1 script1			-смена группы файла на user_1
sudo chown root:group user_1 script1		-смена владельца и группы файла на root и user_1

ДЕСЯТИЧНАЯ ФОРМА ЗАПИСИ

chage -команда для управления параметрами пользователей
chage --help
chage -l user -посмотреть информацию о пользователе user

sudo chage -W 7 user -количество дней о предупреждении смены паролы

passwd user_1 -команда используется для смены  пароля пользователя

=====ПОЛЬЗОВАТЕЛИ И ИХ СМЕНА=====
su - (или su - root) 	-перейти в рут пользователя с переходом в домашнюю папку
exit 					-выйти из пользователя рут
su - user 				-смена пользователя с переходом в домашнюю папку
su user 				-смена пользователя без перехода в домашнюю папку